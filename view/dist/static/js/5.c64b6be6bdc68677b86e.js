webpackJsonp([5],{180:function(n,e,i){i(233);var a=i(4)(i(204),i(474),"data-v-7ef12a22",null);n.exports=a.exports},204:function(n,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(31),t=i.n(a),s=i(13),r=i.n(s);e.default={name:"Admin-User",props:{},data:function(){return{hasNextPage:!0,page:0,list:[],data:{},active:0}},watch:{account:function(n){n&&!this.data[n]&&this.getUserInfo(n)}},computed:{account:function(){return this.list.length?this.list[this.active].account:""},userInfo:function(){return this.data[this.account]}},methods:{getUserInfo:function(n){var e=this;this.$graphql.query('\n        user (account: "'+n+'") {\n          account,\n          name,\n          email,\n          avatar,\n          profile,\n          location,\n          github,\n          website,\n          active,\n          admin\n        }\n      ').then(function(i){e.updateData(r()({},n,i))}).catch(function(n){return e.$toast(n.message,"error")})},updateData:function(n){this.data=t()({},this.data,n)},setAdmin:function(){var n=this,e=this.account,i=this.active;this.$graphql.mutation('\n        setAdmin (account: "'+e+'") {\n          admin\n        }\n      ').then(function(a){n.$toast("设置成功","success"),n.data[e].admin=a.admin,n.list[i].admin=a.admin,n.$forceUpdate()}).catch(function(e){return n.$toast(e.message,"error")})},getUserList:function(){var n=this;this.$graphql.query('\n        users (first: 10, after: "'+(this.cursor||"")+'") {\n          edges {\n            node {\n              account,\n              name,\n              email,\n              avatar,\n              admin\n            }\n            cursor\n          }\n          pageInfo {\n            hasNextPage,\n            endCursor\n          }\n        }\n      ').then(function(e){n.hasNextPage=e.pageInfo.hasNextPage,n.list=n.list.concat(e.edges.map(function(n){return n.node})),n.cursor=e.pageInfo.endCursor}).catch(function(e){return n.$toast(e.message,"error")})}},mounted:function(){this.getUserList()}}},223:function(n,e,i){e=n.exports=i(174)(!0),e.push([n.i,".admin-user[data-v-7ef12a22]{-webkit-box-flex:1;-ms-flex:1;flex:1;margin:20px 0;display:-webkit-box;display:-ms-flexbox;display:flex}.admin-user .user-list[data-v-7ef12a22]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.admin-user .user-list li[data-v-7ef12a22]{height:120px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:20px;border-bottom:1px solid #eee;cursor:pointer}.admin-user .user-list li img[data-v-7ef12a22]{width:64px;height:64px;border-radius:50%;margin-right:20px}.admin-user .user-list li.active[data-v-7ef12a22]{background-color:#66d1b3;color:#fff}.admin-user .admin-main[data-v-7ef12a22]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.admin-user .user-group[data-v-7ef12a22]{display:-webkit-box;display:-ms-flexbox;display:flex}.admin-user .user-group img[data-v-7ef12a22]{width:208px;height:208px;border-radius:8px;margin-right:20px}.admin-user .user-info[data-v-7ef12a22]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;color:gray}.admin-user .user-info-item[data-v-7ef12a22]{margin:5px 0 10px}.admin-user .user-info-item[data-v-7ef12a22]:last-child{margin-bottom:0}.admin-user .admin-badge[data-v-7ef12a22]{font-size:13px;margin-left:10px;background-color:#3da8f5;color:#fff;border-radius:4px;padding:2px 3px}.admin-user .admin-btn[data-v-7ef12a22]{max-width:400px;margin-top:20px}","",{version:3,sources:["C:/Users/NightCat/Desktop/server/view/src/admin/user.vue"],names:[],mappings:"AAKA,6BACE,mBAAoB,AAChB,WAAY,AACR,OAAQ,AAChB,cAAe,AACf,oBAAqB,AACrB,oBAAqB,AACrB,YAAc,CACf,AACD,wCACI,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,4BAA6B,AAC7B,6BAA8B,AAC1B,0BAA2B,AACvB,qBAAuB,CAClC,AACD,2CACM,aAAc,AACd,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,yBAA0B,AACtB,sBAAuB,AACnB,mBAAoB,AAC5B,aAAc,AACd,6BAA8B,AAC9B,cAAgB,CACrB,AACD,+CACQ,WAAY,AACZ,YAAa,AACb,kBAAmB,AACnB,iBAAmB,CAC1B,AACD,kDACQ,yBAA0B,AAC1B,UAAY,CACnB,AACD,yCACI,4BAA6B,AAC7B,6BAA8B,AAC1B,0BAA2B,AACvB,qBAAuB,CAClC,AACD,yCACI,oBAAqB,AACrB,oBAAqB,AACrB,YAAc,CACjB,AACD,6CACM,YAAa,AACb,aAAc,AACd,kBAAmB,AACnB,iBAAmB,CACxB,AACD,wCACI,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,4BAA6B,AAC7B,6BAA8B,AAC1B,0BAA2B,AACvB,sBAAuB,AAC/B,UAAe,CAClB,AACD,6CACM,iBAAmB,CACxB,AACD,wDACQ,eAAiB,CACxB,AACD,0CACI,eAAgB,AAChB,iBAAkB,AAClB,yBAA0B,AAC1B,WAAY,AACZ,kBAAmB,AACnB,eAAiB,CACpB,AACD,wCACI,gBAAiB,AACjB,eAAiB,CACpB",file:"user.vue",sourcesContent:['\n@charset "UTF-8";\n/*\r\n * 基础色\r\n */\n.admin-user[data-v-7ef12a22] {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  margin: 20px 0;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.admin-user .user-list[data-v-7ef12a22] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n}\n.admin-user .user-list li[data-v-7ef12a22] {\n      height: 120px;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n      padding: 20px;\n      border-bottom: 1px solid #eee;\n      cursor: pointer;\n}\n.admin-user .user-list li img[data-v-7ef12a22] {\n        width: 64px;\n        height: 64px;\n        border-radius: 50%;\n        margin-right: 20px;\n}\n.admin-user .user-list li.active[data-v-7ef12a22] {\n        background-color: #66d1b3;\n        color: #fff;\n}\n.admin-user .admin-main[data-v-7ef12a22] {\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n}\n.admin-user .user-group[data-v-7ef12a22] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n}\n.admin-user .user-group img[data-v-7ef12a22] {\n      width: 208px;\n      height: 208px;\n      border-radius: 8px;\n      margin-right: 20px;\n}\n.admin-user .user-info[data-v-7ef12a22] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n    color: #808080;\n}\n.admin-user .user-info-item[data-v-7ef12a22] {\n      margin: 5px 0 10px;\n}\n.admin-user .user-info-item[data-v-7ef12a22]:last-child {\n        margin-bottom: 0;\n}\n.admin-user .admin-badge[data-v-7ef12a22] {\n    font-size: 13px;\n    margin-left: 10px;\n    background-color: #3da8f5;\n    color: #fff;\n    border-radius: 4px;\n    padding: 2px 3px;\n}\n.admin-user .admin-btn[data-v-7ef12a22] {\n    max-width: 400px;\n    margin-top: 20px;\n}\n'],sourceRoot:""}])},233:function(n,e,i){var a=i(223);"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);i(175)("8dcad158",a,!0)},474:function(n,e){n.exports={render:function(){var n=this,e=n.$createElement,i=n._self._c||e;return i("div",{staticClass:"admin-user"},[i("div",{staticClass:"sidebar"},[i("ul",{staticClass:"user-list"},n._l(n.list,function(e,a){return i("li",{class:{active:n.active===a},on:{click:function(e){n.active=a}}},[i("img",{attrs:{src:e.avatar,alt:"avatar"}}),n._v(" "),i("div",{staticClass:"account"},[n._v("\n          "+n._s(e.account)+"\n        ")]),n._v(" "),e.admin?i("span",{staticClass:"admin-badge"},[n._v("管理员")]):n._e()])})),n._v(" "),i("Btn",{directives:[{name:"show",rawName:"v-show",value:n.hasNextPage,expression:"hasNextPage"}],staticClass:"next-btn",on:{click:n.getUserList}},[n._v("Loadmore")])],1),n._v(" "),i("div",{staticClass:"admin-main"},[n.userInfo?[i("div",{staticClass:"user-group"},[i("img",{attrs:{src:n.userInfo.avatar+"?size=200",alt:"avatar"}}),n._v(" "),i("div",{staticClass:"user-info"},[i("div",{staticClass:"user-info-item"},[n._v("账号："+n._s(n.userInfo.account))]),n._v(" "),i("div",{staticClass:"user-info-item"},[n._v("昵称："+n._s(n.userInfo.name))]),n._v(" "),i("div",{staticClass:"user-info-item"},[n._v("邮箱："+n._s(n.userInfo.email))]),n._v(" "),i("div",{staticClass:"user-info-item"},[n._v("概况："+n._s(n.userInfo.profile))]),n._v(" "),i("div",{staticClass:"user-info-item"},[n._v("位置："+n._s(n.userInfo.location))]),n._v(" "),i("div",{staticClass:"user-info-item"},[n._v("Github："+n._s(n.userInfo.github))]),n._v(" "),i("div",{staticClass:"user-info-item"},[n._v("网站："+n._s(n.userInfo.website))])])]),n._v(" "),i("Btn",{staticClass:"admin-btn",on:{click:n.setAdmin}},[n._v(n._s(n.userInfo.admin?"取消管理员":"设置管理员"))])]:n._e()],2)])},staticRenderFns:[]}}});
//# sourceMappingURL=5.c64b6be6bdc68677b86e.js.map