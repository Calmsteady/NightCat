webpackJsonp([10,13],{47:function(e,t,r){var n;!function(){"use strict";function i(e){function t(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}function r(e){var t=Object.getPrototypeOf(e);return t?Object.create(t):{}}function n(e,t,r){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!1,value:r})}function o(e,t){n(e,t,function(){throw new c("The "+t+" method cannot be invoked on an Immutable data structure.")})}function a(e){n(e,q,!0)}function s(e){return"object"!=typeof e||(null===e||Boolean(Object.getOwnPropertyDescriptor(e,q)))}function l(e,t){return e===t||e!==e&&t!==t}function u(e){return!(null===e||"object"!=typeof e||Array.isArray(e)||e instanceof Date)}function c(e){var t=new Error(e);return t.__proto__=c,t}function f(e,t){a(e);for(var r in t)t.hasOwnProperty(r)&&o(e,t[r]);return Object.freeze(e),e}function p(e,t){var r=e[t];n(e,t,function(){return U(r.apply(e,arguments))})}function d(e,t,r){var n=r&&r.deep;if(e in this&&(n&&this[e]!==t&&u(t)&&u(this[e])&&(t=U.merge(this[e],t,{deep:!0,mode:"replace"})),l(this[e],t)))return this;var i=w.call(this);return i[e]=U(t),m(i)}function h(e,t,r){var n=e[0];if(1===e.length)return d.call(this,n,t,r);var i,o=e.slice(1),a=this[n];if("object"==typeof a&&null!==a)i=U.setIn(a,o,t);else{var s=o[0];i=""!==s&&isFinite(s)?h.call(V,o,t):E.call(K,o,t)}if(n in this&&a===i)return this;var l=w.call(this);return l[n]=i,m(l)}function m(e){for(var t in W)if(W.hasOwnProperty(t)){var r=W[t];p(e,r)}$.use_static||(n(e,"flatMap",g),n(e,"asObject",x),n(e,"asMutable",w),n(e,"set",d),n(e,"setIn",h),n(e,"update",A),n(e,"updateIn",T));for(var i=0,o=e.length;i<o;i++)e[i]=U(e[i]);return f(e,B)}function v(e){return $.use_static||n(e,"asMutable",b),f(e,G)}function b(){return new Date(this.getTime())}function g(e){if(0===arguments.length)return this;var t,r=[],n=this.length;for(t=0;t<n;t++){var i=e(this[t],t,this);Array.isArray(i)?r.push.apply(r,i):r.push(i)}return m(r)}function y(e){if("undefined"==typeof e&&0===arguments.length)return this;if("function"!=typeof e){var t=Array.isArray(e)?e.slice():Array.prototype.slice.call(arguments);t.forEach(function(e,t,r){"number"==typeof e&&(r[t]=e.toString())}),e=function(e,r){return t.indexOf(r)!==-1}}var n=r(this);for(var i in this)this.hasOwnProperty(i)&&e(this[i],i)===!1&&(n[i]=this[i]);return D(n)}function w(e){var t,r,n=[];if(e&&e.deep)for(t=0,r=this.length;t<r;t++)n.push(O(this[t]));else for(t=0,r=this.length;t<r;t++)n.push(this[t]);return n}function x(e){"function"!=typeof e&&(e=function(e){return e});var t,r={},n=this.length;for(t=0;t<n;t++){var i=e(this[t],t,this),o=i[0],a=i[1];r[o]=a}return D(r)}function O(e){return!e||"object"!=typeof e||!Object.getOwnPropertyDescriptor(e,q)||e instanceof Date?e:U.asMutable(e,{deep:!0})}function k(e,t){for(var r in e)Object.getOwnPropertyDescriptor(e,r)&&(t[r]=e[r]);return t}function P(e,t){function n(e,n,i){var a=U(n[i]),s=p&&p(e[i],a,t),f=e[i];if(void 0!==o||void 0!==s||!e.hasOwnProperty(i)||!l(a,f)){var d;d=s?s:c&&u(f)&&u(a)?U.merge(f,a,t):a,l(f,d)&&e.hasOwnProperty(i)||(void 0===o&&(o=k(e,r(e))),o[i]=d)}}function i(e,t){for(var n in e)t.hasOwnProperty(n)||(void 0===o&&(o=k(e,r(e))),delete o[n])}if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#merge can only be invoked with objects or arrays, not "+JSON.stringify(e));var o,a,s=Array.isArray(e),c=t&&t.deep,f=t&&t.mode||"merge",p=t&&t.merger;if(s)for(var d=0,h=e.length;d<h;d++){var m=e[d];for(a in m)m.hasOwnProperty(a)&&n(void 0!==o?o:this,m,a)}else{for(a in e)Object.getOwnPropertyDescriptor(e,a)&&n(this,e,a);"replace"===f&&i(this,e)}return void 0===o?this:D(o)}function j(e,t){var r=t&&t.deep;if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#replace can only be invoked with objects or arrays, not "+JSON.stringify(e));return U.merge(this,e,{deep:r,mode:"replace"})}function E(e,t,n){if(!(e instanceof Array)||0===e.length)throw new TypeError('The first argument to Immutable#setIn must be an array containing at least one "key" string.');var i=e[0];if(1===e.length)return I.call(this,i,t,n);var o,a=e.slice(1),s=this[i];if(o=this.hasOwnProperty(i)&&"object"==typeof s&&null!==s?U.setIn(s,a,t):E.call(K,a,t),this.hasOwnProperty(i)&&s===o)return this;var l=k(this,r(this));return l[i]=o,D(l)}function I(e,t,n){var i=n&&n.deep;if(this.hasOwnProperty(e)&&(i&&this[e]!==t&&u(t)&&u(this[e])&&(t=U.merge(this[e],t,{deep:!0,mode:"replace"})),l(this[e],t)))return this;var o=k(this,r(this));return o[e]=U(t),D(o)}function A(e,t){var r=Array.prototype.slice.call(arguments,2),n=this[e];return U.set(this,e,t.apply(n,[n].concat(r)))}function C(e,t){for(var r=0,n=t.length;null!=e&&r<n;r++)e=e[t[r]];return r&&r==n?e:void 0}function T(e,t){var r=Array.prototype.slice.call(arguments,2),n=C(this,e);return U.setIn(this,e,t.apply(n,[n].concat(r)))}function _(e){var t,n=r(this);if(e&&e.deep)for(t in this)this.hasOwnProperty(t)&&(n[t]=O(this[t]));else for(t in this)this.hasOwnProperty(t)&&(n[t]=this[t]);return n}function S(){return{}}function D(e){return $.use_static||(n(e,"merge",P),n(e,"replace",j),n(e,"without",y),n(e,"asMutable",_),n(e,"set",I),n(e,"setIn",E),n(e,"update",A),n(e,"updateIn",T)),f(e,J)}function N(e){return"object"==typeof e&&null!==e&&(e.$$typeof===L||e.$$typeof===H)}function M(e){return"undefined"!=typeof File&&e instanceof File}function U(e,t,r){if(s(e)||N(e)||M(e))return e;if(Array.isArray(e))return m(e.slice());if(e instanceof Date)return v(new Date(e.getTime()));var n=t&&t.prototype,i=n&&n!==Object.prototype?function(){return Object.create(n)}:S,o=i();if(null==r&&(r=64),r<=0)throw new c("Attempt to construct Immutable from a deeply nested object was detected. Have you tried to wrap an object with circular references (e.g. React element)? See https://github.com/rtfeldman/seamless-immutable/wiki/Deeply-nested-object-was-detected for details.");r-=1;for(var a in e)Object.getOwnPropertyDescriptor(e,a)&&(o[a]=U(e[a],void 0,r));return D(o)}function F(e){function t(){var t=[].slice.call(arguments),r=t.shift();return e.apply(r,t)}return t}function z(e,t){function r(){var r=[].slice.call(arguments),n=r.shift();return Array.isArray(n)?t.apply(n,r):e.apply(n,r)}return r}function R(e,t,r){function n(){var n=[].slice.call(arguments),i=n.shift();return Array.isArray(i)?t.apply(i,n):i instanceof Date?r.apply(i,n):e.apply(i,n)}return n}var H="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element"),L=60103,$={use_static:!1};t(e)&&void 0!==e.use_static&&($.use_static=Boolean(e.use_static));var q="__immutable_invariants_hold",J=["setPrototypeOf"],Y=["keys"],B=J.concat(["push","pop","sort","splice","shift","unshift","reverse"]),W=Y.concat(["map","filter","slice","concat","reduce","reduceRight"]),G=J.concat(["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]);c.prototype=Error.prototype;var V=U([]),K=U({});return U.from=U,U.isImmutable=s,U.ImmutableError=c,U.merge=F(P),U.replace=F(j),U.without=F(y),U.asMutable=R(_,w,b),U.set=z(I,d),U.setIn=z(E,h),U.update=F(A),U.updateIn=F(T),U.flatMap=F(g),U.asObject=F(x),$.use_static||(U.static=i({use_static:!0})),Object.freeze(U),U}var o=i();n=function(){return o}.call(t,r,t,e),!(void 0!==n&&(e.exports=n))}()},102:function(e,t,r){t=e.exports=r(14)(),t.push([e.id,".info-view{-webkit-box-flex:1;-ms-flex:1;flex:1;background-color:#eee;overflow:hidden}.info-view .form-group{width:500px;margin:0 auto;padding:20px 0}.info-view .form-item{margin:30px 0 0;width:100%;position:relative}.info-view .form-item label{position:absolute;top:-20px;left:0;font-size:14px;color:#868686}.info-view .form-item input{width:100%;height:34px;padding:6px 8px;font-size:14px;color:#333;line-height:20px;vertical-align:middle;background-color:#fafafa;border:1px solid #ddd;border-radius:4px;box-shadow:inset 0 1px 2px rgba(0,0,0,.075)}.info-view .form-item input:focus{border-color:#51a7e8;outline:none;box-shadow:inset 0 1px 2px rgba(0,0,0,.075),0 0 5px rgba(81,167,232,.5)}.info-view .form-item input[disabled]{opacity:.75;background-color:#f1f1f1}.info-view .form-item small{color:#a3a3a3;font-size:12px}.info-view .user-avatar{border-radius:8px;width:80px;height:80px;position:relative;overflow:hidden;display:inline-block;vertical-align:bottom;box-shadow:0 0 0 4px rgba(255,255,251,.45)}.info-view .user-avatar img{width:100%;height:100%}.info-view .user-avatar input{position:absolute;cursor:pointer;left:0;top:0;width:100%;height:100%;z-index:1;opacity:0}.info-view .update-btn{margin-top:20px;padding:6px 12px;font-size:14px;color:#333;border:none;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#eee;background-image:-webkit-gradient(linear,left top,left bottom,from(#fcfcfc),to(#eee));background-image:-webkit-linear-gradient(#fcfcfc,#eee);background-image:linear-gradient(#fcfcfc,#eee);border:1px solid #d5d5d5;border-radius:3px;-webkit-appearance:none}.info-view .update-btn:hover{background-image:-webkit-gradient(linear,left top,left bottom,from(#eee),to(#ddd));background-image:-webkit-linear-gradient(#eee,#ddd);background-image:linear-gradient(#eee,#ddd);border-color:#ccc}.info-view .update-btn:active{background-color:#dcdcdc;background-image:none;border-color:#b5b5b5;box-shadow:inset 0 2px 4px rgba(0,0,0,.15)}@media (max-width:768px){.info-view .form-group{width:100%;padding:5px 15px 15px}}",""])},106:function(e,t,r){var n=r(102);"string"==typeof n&&(n=[[e.id,n,""]]);r(13)(n,{});n.locals&&(e.exports=n.locals)},155:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(56),o=n(i),a=r(159),s=n(a),l=r(7),u=n(l),c=r(3),f=n(c),p=r(4),d=n(p),h=r(9),m=n(h),v=r(8),b=n(v),g=r(1),y=n(g),w=r(47),x=n(w),O=r(18),k=r(15),P=r(23),j=n(P),E=r(69),I=n(E);r(106);var A=function(e){function t(e){(0,f.default)(this,t);var r=(0,m.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return r.state={isChange:!1,account:void 0,info:r.props.userInfo},r.update=r.update.bind(r),r.uploadImg=r.uploadImg.bind(r),r.notice=function(e,t,n){return r.props.actions.execute("notice",e,t,{status:n,styles:{top:"auto",bottom:"30px"}})},r}return(0,b.default)(t,e),(0,d.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.userInfo!==this.state.info&&this.setState({info:e.userInfo})}},{key:"update",value:function(){var e=this;this.notice("Uploading data...",0,"loading"),axios.post("/saveUserInfo",{info:this.state.info}).then(function(t){e.notice(t.message,2e3,"success"),e.props.authConf.setUserInfo(e.state.info)}).catch(function(t){e.notice(t.message,2e3,"error")})}},{key:"uploadImg",value:function(e){var t=this,r=e.target.files[0];if(!r)return!1;var n=new FileReader;n.onload=function(e){t.compress(e.target.result).then(function(e){t.setState({info:x.default.merge(t.state.info,{avatar:e})})})},n.readAsDataURL(r)}},{key:"compress",value:function(e){return new s.default(function(t,r){var n={width:320,height:320,quality:.92},i=new Image,o=document.createElement("CANVAS");o.width=n.width,o.height=n.height;var a=o.getContext("2d");i.onload=function(){var e=[i.width,i.height],r=void 0,s=void 0,l=void 0;e[0]>e[1]?(s=0,r=(e[0]-e[1])/2,l=e[1]):(r=0,s=(e[1]-e[0])/2,l=e[0]),a.drawImage(i,r,s,l,l,0,0,n.width,n.height),t(o.toDataURL("image/jpeg",n.quality))},i.src=e})}},{key:"handleChange",value:function(e,t){var r=e.target.value;this.setState({isChange:!0,info:x.default.merge(this.state.info,(0,o.default)({},t,r))})}},{key:"createProps",value:function(e,t){var r=this;return{spellCheck:!1,autoComplete:!1,id:e,ref:e,type:t,readOnly:!this.props.isSelf,disabled:!this.props.isSelf,value:this.state.info[e]||"",onChange:function(t){return r.handleChange(t,e)}}}},{key:"render",value:function(){return y.default.createElement("div",{ref:"view",className:"info-view"},y.default.createElement("div",{className:"form-group"},this.props.isSelf&&y.default.createElement("div",{className:"form-item"},y.default.createElement("label",{htmlFor:"name"},"Avatar"),y.default.createElement("div",{className:"user-avatar"},y.default.createElement("img",{src:this.state.info.avatar}),y.default.createElement("input",{type:"file",className:"updateHeadImg",onChange:this.uploadImg})),y.default.createElement("small",null," Click the picture to upload avatar ")),y.default.createElement("div",{className:"form-item"},y.default.createElement("label",{htmlFor:"name"},"Name"),y.default.createElement("input",this.createProps("name","text"))),y.default.createElement("div",{className:"form-item"},y.default.createElement("label",{htmlFor:"profile"},"Profile"),y.default.createElement("input",this.createProps("profile","text"))),y.default.createElement("div",{className:"form-item"},y.default.createElement("label",{htmlFor:"website"},"Website"),y.default.createElement("input",this.createProps("website","text"))),y.default.createElement("div",{className:"form-item"},y.default.createElement("label",{htmlFor:"github"},"Github"),y.default.createElement("input",this.createProps("github","text"))),y.default.createElement("div",{className:"form-item"},y.default.createElement("label",{htmlFor:"location"},"Location"),y.default.createElement("input",this.createProps("location","text"))),this.props.isSelf&&y.default.createElement("button",{className:"update-btn",onClick:this.update},"Update Info")),y.default.createElement("div",{className:"modal"}))}}]),t}(g.Component),C=function(e){return{}},T=function(e){return{actions:(0,k.bindActionCreators)(j.default,e),authConf:(0,k.bindActionCreators)(I.default,e)}};t.default=(0,O.connect)(C,T)(A),A.propTypes={isLogin:g.PropTypes.bool,isSelf:g.PropTypes.bool,userInfo:g.PropTypes.object,authConf:g.PropTypes.object,actions:g.PropTypes.object,history:g.PropTypes.object,location:g.PropTypes.object},A.contextTypes={router:y.default.PropTypes.any.isRequired}}});